---
// src/pages/index.astro
import BaseLayout from "../layouts/BaseLayout.astro";
import Game from "../components/Game.vue";
import About from "../sections/About.astro";
import Projects from "../sections/Projects.astro";
import Services from "../sections/Services.astro";
import Contacts from "../sections/Contacts.astro";

const pageTitle = "Nine | Personal Website";
const pageDescription =
  "Hi, I'm Nine. Welcome to my personal portfolio, built with Astro, where I showcase my projects, achievements, and passion for web development and gaming.";
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <section
    class="hero relative mx-auto flex min-h-screen flex-col items-center justify-center"
    id="home"
  >
    <div
      class="hero-content flex-col items-center text-center lg:flex-row lg:text-left"
    >
      <div>
        <h1>
          Hello I'm
          <span
            class="whitespace-nowrap bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"
          >
            Nine
          </span>
        </h1>
        <h2>
          I'm a <span
            id="typewriter"
            class="font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"
          ></span>
        </h2>
      </div>
      <Game client:idle class="mt-8 h-96 w-96 lg:ml-8 lg:mt-0" />
    </div>

    <a
      href="#about"
      class="scroll-down absolute bottom-4 left-1/2 flex w-auto -translate-x-1/2 transform items-center justify-center p-2"
      aria-label="Scroll Down to About"
      id="scrollLink"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6 animate-bounce text-current"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M19 13l-7 7-7-7m14-8l-7 7-7-7"></path>
      </svg>
    </a>
  </section>

  <section id="about">
    <About />
  </section>

  <section id="projects">
    <Projects />
  </section>

  <section id="services">
    <Services />
  </section>

  <section id="contacts">
    <Contacts />
  </section>

  <script is:inline>
    function typewriterEffect(elementId, words, speed = 100, deleteSpeed = 50) {
      let i = 0;
      let currentWord = "";
      let currentIndex = 0;
      const element = document.getElementById(elementId);

      if (!element) {
        console.error(`Typewriter element with ID "${elementId}" not found.`);
        return;
      }

      const typeNextWord = () => {
        currentWord = words[i];
        currentIndex = 0;
        element.innerHTML = "";
        typeLetterByLetter();
      };

      const typeLetterByLetter = () => {
        if (currentIndex < currentWord.length) {
          element.innerHTML += currentWord.charAt(currentIndex);
          currentIndex++;
          setTimeout(typeLetterByLetter, speed);
        } else {
          setTimeout(deleteWord, speed * 10); // Pause after typing
        }
      };

      const deleteWord = () => {
        if (currentIndex > 0) {
          element.innerHTML = element.innerHTML.slice(0, -1);
          currentIndex--;
          setTimeout(deleteWord, deleteSpeed);
        } else {
          i = (i + 1) % words.length;
          setTimeout(typeNextWord, speed * 5); // Pause before typing next
        }
      };
      typeNextWord(); // Initiate
    }

    document.addEventListener("DOMContentLoaded", () => {
      // Initialize Typewriter
      const words = ["Developer", "Gamer", "Student"];
      const elementId = "typewriter";
      typewriterEffect(elementId, words, 150, 80);

      // Smooth Scroll Click Listener for Scroll-Down Button
      const scrollLink = document.getElementById("scrollLink");
      if (scrollLink) {
        scrollLink.addEventListener("click", function (e) {
          e.preventDefault();
          const targetId = this.getAttribute("href");
          const target = document.querySelector(targetId);
          if (target) {
            target.scrollIntoView({
              behavior: "smooth",
              block: "start", // Align top of target with top of viewport
            });
          } else {
            console.warn(`Smooth scroll target "${targetId}" not found.`);
          }
        });
      } else {
        console.warn(
          "Scroll down link element (#scrollLink) not found for click listener."
        );
      }
    });
  </script>

  <style>
    /* Adjust heading sizes on very small screens */
    @media screen and (max-width: 375px) {
      #home h1 {
        font-size: 2.25rem;
        line-height: 1.2;
      }
      #home h2 {
        font-size: 1.25rem;
        line-height: 1.3;
      }
    }
  </style>
</BaseLayout>
